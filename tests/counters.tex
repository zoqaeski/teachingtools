% vim: ft=tex

% arara: lualatex
% arara: lualatex

\documentclass{scrartcl}

%% KOMA options
\KOMAoption{cleardoublepage}{empty}
\KOMAoption{DIV}{10}
\KOMAoption{draft}{false}
\KOMAoption{fontsize}{10pt}
\KOMAoption{headings}{small}
\KOMAoption{paper}{a4}
\KOMAoption{parskip}{half}
\KOMAoption{twoside}{false}
\KOMAoption{captions}{signature}
\KOMAoption{titlepage}{false}
\KOMAoption{abstract}{false}

\usepackage{etoolbox}

\usepackage{fontspec}
\defaultfontfeatures{Ligatures=TeX}

\usepackage{teachingtools}
\ttsetup{
  % example-label = upper-alph,
  question / label = lower-alph,
  question / prefix = subsection,
  % question / reset = none,
  prefix-separator = dot,
  % reset-all = none,
  % suffix-character = bracket,
}

% \usepackage[foo]{siunitx}
% \renewcommand{\thequestion}{\printqulabelformat}

%% Penalties
\hyphenpenalty=2500
\tolerance=500
\widowpenalty=1500
\clubpenalty=1500

\usepackage{hyperref}
\hypersetup{
  colorlinks=false,
  hidelinks}
\usepackage[all]{hypcap}
\usepackage[noabbrev,capitalise]{cleveref}
\labelcrefformat{subfigure}{\textbf{(#2#1#3)}}

\begin{document}

\section{A section}

\begin{question}\label{qu:test}
The question in a section
\end{question}

\thequestion

\subsection{A subsection}

\begin{question}
The question in a subsection
\end{question}

\begin{question*}
An unnumbered question
\end{question*}

\begin{question}[label = lower-roman]\label{qu:test2}
Another question in a subsection
\end{question}

\thequestion

\subsubsection{A subsubsection}

\begin{question}\label{qu:test3}
The question in a subsubsection
\end{question}

\thequestion

\begin{question}
Another question in a subsubsection
\end{question}

\subsubsection{A subsubsection}

\begin{question}
The question in a subsubsection
\end{question}

\begin{question}
Another question in a subsubsection
\end{question}

\subsection{Another subsection}

\begin{question}
Another question in a subsection
\end{question}

\begin{question}
What is this question?
\end{question}

\section{Another section}

\begin{question}\label{qu:anothertest}
Another question in another section
\end{question}

See also \ref{qu:test} and \ref{qu:test2}, \ref{qu:test3}, \ref{qu:anothertest}.

\begin{question}
Another question in another section
\end{question}

\subsection{A subsection}

\begin{question}
The question in a subsection
\end{question}

\begin{question}
Another question in a subsection
\end{question}

\begin{question}
Another question in a subsection
\end{question}

\subsubsection{A subsubsection}

\begin{question}
The question in a subsubsection
\end{question}

\begin{question}
Another question in a subsubsection
\end{question}

\subsubsection{A subsubsection}

\begin{question}
The question in a subsubsection
\end{question}

\begin{question}
Another question in a subsubsection
\end{question}

\end{document}
